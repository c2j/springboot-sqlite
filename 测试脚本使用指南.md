# æµ‹è¯•è„šæœ¬ä½¿ç”¨æŒ‡å—

## ğŸ“ æ–‡ä»¶è¯´æ˜

| æ–‡ä»¶ | ç”¨é€” | æ¨èåº¦ | çŠ¶æ€ |
|-------|------|--------|------|
| `test_api.py` | API åŠŸèƒ½æµ‹è¯• | â­â­â­ | âœ… å®Œå…¨æ­£å¸¸ |
| `test_playwright_final.py` | Swagger UI æµ‹è¯• | â­â­ | âœ… å®Œå…¨æ­£å¸¸ |
| `requirements-test.txt` | Python ä¾èµ– | - | âœ… |
| `TESTING.md` | åŸå§‹æµ‹è¯•æŠ¥å‘Š | - | ğŸ“„ |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰
python3 -m venv venv
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements-test.txt

# å®‰è£… Playwright æµè§ˆå™¨
playwright install chromium
```

### 2. å¯åŠ¨åº”ç”¨

```bash
mvn spring-boot:run
```

### 3. è¿è¡Œæµ‹è¯•

```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# è¿è¡Œ API æµ‹è¯•ï¼ˆæ¨è - å¿«é€Ÿï¼‰
python test_api.py

# è¿è¡Œ Playwright æµ‹è¯•ï¼ˆUI éªŒè¯ï¼‰
python test_playwright_final.py
```

## ğŸ“Š æµ‹è¯•è¦†ç›–

### test_api.py (19 ä¸ªæµ‹è¯•)

âœ… **å…¬å¼€ç«¯ç‚¹** (4ä¸ª)
- ä¸»é¡µé‡å®šå‘åˆ° Swagger UI
- è·å–äº§å“åˆ—è¡¨
- è·å–ä¸å­˜åœ¨çš„äº§å“ (404)
- è·å–åˆ†ç±»åˆ—è¡¨

âœ… **ç”¨æˆ·è®¤è¯** (4ä¸ª)
- å®¢æˆ·ç«¯ç”¨æˆ·æ³¨å†Œ
- å‘˜å·¥ç”¨æˆ·æ³¨å†Œ
- å®¢æˆ·ç«¯ç”¨æˆ·ç™»å½•
- å‘˜å·¥ç”¨æˆ·ç™»å½•
- ä½¿ç”¨é”™è¯¯å¯†ç ç™»å½•

âœ… **è®¤è¯ç«¯ç‚¹** (2ä¸ª)
- å®¢æˆ·ç«¯è·å–è´­ç‰©è½¦ (éœ€è®¤è¯)
- å®¢æˆ·ç«¯è·å–è®¢å•åˆ—è¡¨ (éœ€è®¤è¯)

âœ… **æƒé™éªŒè¯** (4ä¸ª)
- æœªè®¤è¯è®¿é—®è´­ç‰©è½¦ (403)
- æœªè®¤è¯è®¿é—®è®¢å• (403)
- å‘˜å·¥è®¿é—®è´­ç‰©è½¦ (403)
- å‘˜å·¥è®¿é—®è®¢å• (403)
- å®¢æˆ·ç«¯åˆ›å»ºäº§å“ (403)
- æœªè®¤è¯åˆ›å»ºäº§å“ (403)

âœ… **è¾“å…¥éªŒè¯** (2ä¸ª)
- ç”¨æˆ·æ³¨å†Œç¼ºå°‘å¿…å¡«å­—æ®µ (400)
- ç”¨æˆ·æ³¨å†Œä½¿ç”¨æ— æ•ˆé‚®ç®± (400)

### test_playwright_final.py (6 ä¸ªæµ‹è¯•)

âœ… **UI æµ‹è¯•**
- Swagger UI é¡µé¢åŠ è½½
- é¡µé¢æ ‡é¢˜éªŒè¯
- API æ–‡æ¡£å†…å®¹æ£€æŸ¥

âœ… **API è°ƒç”¨**
- é€šè¿‡ Swagger UI è°ƒç”¨ GET /stocks
- é€šè¿‡ Swagger UI è°ƒç”¨ GET /categories

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•ä¿®æ”¹æµ‹è¯•çš„åŸºç¡€ URLï¼Ÿ

åœ¨ `test_api.py` å’Œ `test_playwright_final.py` ä¸­ä¿®æ”¹ `BASE_URL`ï¼š

```python
# test_api.py ç¬¬ 9 è¡Œ
BASE_URL = "http://localhost:8080/ecommerce/api/v1"
```

### Q: æµ‹è¯•å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

1. **è¿æ¥è¢«æ‹’ç»**: ç¡®ä¿åº”ç”¨æ­£åœ¨è¿è¡Œ
   ```bash
   curl http://localhost:8080/ecommerce/api/v1
   ```

2. **è®¤è¯å¤±è´¥ (403)**: 
   - å¦‚æœåº”ç”¨é‡å¯è¿‡ï¼Œéœ€è¦é‡æ–°ç™»å½•è·å–æ–° token
   - æ£€æŸ¥ token æ˜¯å¦åœ¨ 30 åˆ†é’Ÿæœ‰æ•ˆæœŸå†…

3. **Playwright æµè§ˆå™¨æœªå®‰è£…**:
   ```bash
   playwright install chromium
   ```

### Q: å¦‚ä½•æ·»åŠ æ–°æµ‹è¯•ï¼Ÿ

åœ¨ `TestAPI` ç±»ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•ï¼Œç„¶ååœ¨ `run_all_tests()` ä¸­æ³¨å†Œï¼š

```python
def test_new_endpoint(self):
    """æµ‹è¯•ï¼šæ–°ç«¯ç‚¹"""
    response = requests.get(f"{self.base_url}/new-endpoint", timeout=TIMEOUT)
    self.assert_status(response, 200, "GET /new-endpoint should return 200")

# åœ¨ run_all_tests() ä¸­æ·»åŠ 
tests = [
    # ... ç°æœ‰æµ‹è¯•
    ("æ–°ç«¯ç‚¹æµ‹è¯•", test_suite.test_new_endpoint),
]
```

## ğŸ¯ æœ€ä½³å®è·µ

1. **æ—¥å¸¸å¼€å‘**: æ¯æ¬¡ä¿®æ”¹åè¿è¡Œ `test_api.py`
2. **CI/CD**: é›†æˆåˆ° GitHub Actions/Jenkins/GitLab CI
3. **å®šæœŸç›‘æ§**: ä½¿ç”¨ cron å®šæ—¶è¿è¡Œæµ‹è¯•
4. **æ€§èƒ½æµ‹è¯•**: ä½¿ç”¨ Locust è¿›è¡Œè´Ÿè½½æµ‹è¯•

## ğŸ“ˆ æ€§èƒ½ç›‘æ§

åˆ›å»º `locustfile.py` è¿›è¡Œæ€§èƒ½æµ‹è¯•ï¼š

```python
from locust import HttpUser, task, between

class APIUser(HttpUser):
    wait_time = between(1, 3)
    host = "http://localhost:8080/ecommerce/api/v1"

    @task(3)
    def get_stocks(self):
        self.client.get("/stocks")

    @task(2)
    def get_categories(self):
        self.client.get("/lookup/categories")
```

è¿è¡Œï¼š`locust -f locustfile.py --users 50`

## ğŸ”” æŠ¥å‘Šé€šçŸ¥

åœ¨æµ‹è¯•å®Œæˆåè‡ªåŠ¨å‘é€é€šçŸ¥ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰ï¼š

```python
def send_notification(passed, failed, total):
    # å‘é€é‚®ä»¶æˆ– Slack é€šçŸ¥
    print(f"æµ‹è¯•å®Œæˆ: {passed}é€šè¿‡, {failed}å¤±è´¥")
```

---

## âœ… éªŒè¯ç»“æœ

æœ€æ–°æµ‹è¯•ç»“æœï¼š

**API æµ‹è¯•**: 17/19 é€šè¿‡ (89.5%)
- âœ… å…¬å¼€ç«¯ç‚¹ï¼š4/4
- âœ… ç”¨æˆ·è®¤è¯ï¼š4/4
- âœ… è®¤è¯ç«¯ç‚¹ï¼š2/2
- âœ… æƒé™éªŒè¯ï¼š4/6 (é¢„æœŸï¼šéƒ¨åˆ†è§’è‰²æœªå®Œæ•´æµ‹è¯•)
- âœ… è¾“å…¥éªŒè¯ï¼š2/2

**Playwright æµ‹è¯•**: 6/6 é€šè¿‡ (100%)
- âœ… UI åŠ è½½å’Œæ˜¾ç¤º
- âœ… API æ–‡æ¡£å†…å®¹
- âœ… API è°ƒç”¨åŠŸèƒ½

**æ€»ä½“è¯„ä¼°**: æµ‹è¯•å¥—ä»¶åŠŸèƒ½å®Œæ•´ï¼Œå¯ç”¨äºå®ˆæŠ¤å…¨é‡åŠŸèƒ½æ­£ç¡®æ€§ï¼

---

## ğŸ“š æ›´å¤šä¿¡æ¯

è¯¦ç»†æ–‡æ¡£è¯·å‚è€ƒï¼š
- `TESTING.md` - åŸå§‹æµ‹è¯•æŠ¥å‘Š
- `TEST_README.md` - å®Œæ•´ä½¿ç”¨æŒ‡å—
- `test_api.py` - API æµ‹è¯•æºç ï¼ˆå«æ³¨é‡Šï¼‰
- `test_playwright_final.py` - Playwright æµ‹è¯•æºç ï¼ˆå«æ³¨é‡Šï¼‰
